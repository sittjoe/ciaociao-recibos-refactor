<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Verificación de Documento | ciaociao.mx</title>
    <style>
      :root{ --bg:#f8f7f3; --paper:#fffdfa; --ink:#1f2937; --muted:#6b7280; --line:#e7e3d9; --ok:#16a34a; --bad:#dc2626; --gold-1:#bfa36f; --gold-2:#d9c08c; --gold-3:#a98e5b; }
      body{ margin:0; background:var(--bg); color:var(--ink); font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, sans-serif; }
      .wrap{ max-width: 900px; margin: 40px auto; padding: 24px; }
      .card{ background: linear-gradient(#fffefa,#fffdf7); border:1px solid var(--line); border-radius:16px; padding:22px; box-shadow:0 18px 50px rgba(0,0,0,.08), 0 4px 16px rgba(0,0,0,.05); }
      .title{ display:flex; align-items:center; gap: 14px; margin: 0 0 10px; }
      .title img{ width: 160px; height:auto; filter:saturate(1.05) contrast(1.04); }
      .status{ display:inline-flex; align-items:center; gap:8px; padding:6px 10px; border-radius:999px; font-size: 13px; }
      .ok{ background:#f0fdf4; color:#166534; border:1px solid #dcfce7; }
      .bad{ background:#fef2f2; color:#991b1b; border:1px solid #fee2e2; }
      .grid{ display:grid; grid-template-columns:1fr 1fr; gap: 14px; }
      .field{ background:#fff; border:1px dashed #eae6dc; border-radius:12px; padding:12px; }
      .label{ color: var(--muted); text-transform: uppercase; letter-spacing:.06em; font-size: 11px; }
      .value{ font-weight: 600; font-size: 15px; }
      .actions{ display:flex; gap:8px; margin-top: 12px; }
      .btn{ padding:10px 12px; border-radius: 10px; border:1px solid var(--gold-3); background:linear-gradient(180deg,var(--gold-2),var(--gold-1)); color:#664f22; cursor:pointer; }
      .muted{ color: var(--muted); font-size: 13px; }
      .footer{ margin-top:16px; color: var(--muted); font-size: 12px; }
      @media (max-width: 768px){ .grid{ grid-template-columns:1fr; }}
    </style>
  </head>
  <body>
    <div class="wrap">
      <div class="card">
        <div class="title">
          <img src="../assets/logo.png" alt="ciaociao.mx" />
          <div>
            <h2 style="margin:0;">Verificación de Documento</h2>
            <div id="statusBadge" class="status bad">Cargando…</div>
          </div>
        </div>
        <p class="muted">Este verificador confirma que el código QR corresponde a un documento emitido por ciaociao.mx y no ha sido alterado.</p>
        <div class="grid">
          <div class="field"><div class="label">Tipo</div><div class="value" id="vType">-</div></div>
          <div class="field"><div class="label">Folio</div><div class="value" id="vNumber">-</div></div>
          <div class="field"><div class="label">Cliente</div><div class="value" id="vClient">-</div></div>
          <div class="field"><div class="label">Fecha</div><div class="value" id="vDate">-</div></div>
          <div class="field"><div class="label">Total</div><div class="value" id="vTotal">-</div></div>
          <div class="field"><div class="label">ID</div><div class="value" id="vId" style="word-break:break-all;">-</div></div>
        </div>
        <div class="actions">
          <button class="btn" id="copyUrl">Copiar URL</button>
          <button class="btn" id="openHome">Ir al inicio</button>
        </div>
        <div class="footer">© <span id="year"></span> CIAO CIAO MX – Joyería Fina • info@ciaociao.mx</div>
      </div>
    </div>
    <script type="module">
      import 'https://cdn.jsdelivr.net/gh/sittjoe/ciaociao-recibos-refactor@main/src/verify/verify.js';
    </script>
    <script>
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.getRegistrations().then(rs => rs.forEach(r => r.unregister()));
      }
      if (window.caches && caches.keys) { caches.keys().then(keys => keys.forEach(k => caches.delete(k))).catch(()=>{}); }
    </script>
  </body>
  </html>
